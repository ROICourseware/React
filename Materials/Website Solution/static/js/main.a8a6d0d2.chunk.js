(this["webpackJsonpbook-reactions"]=this["webpackJsonpbook-reactions"]||[]).push([[0],{45:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(0),c=n.n(o),a=n(21),s=n.n(a),i=(n(45),n(14)),l=function(){return Object(r.jsxs)("nav",{className:"navbar navbar-expand-sm bg-light",children:[Object(r.jsx)(i.b,{className:"navbar-brand",to:"/",children:"Book Reactions"}),Object(r.jsxs)("ul",{className:"navbar-nav",children:[Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(i.b,{className:"nav-link",to:"/",children:"Home"})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(i.b,{className:"nav-link",to:"/about",children:"About"})})]})]})},u=n(11),d=function(e){return Object(r.jsx)("tr",{children:Object(r.jsx)("td",{children:e.review})})},b=c.a.memo(d),j=n(9),h=function(e){var t=e.bookId,n=e.addReview;return Object(r.jsx)(j.d,{initialValues:{content:""},validate:function(e){var t={};return e.content?e.content.length<5&&(t.content="Review must be at least 5 characters"):t.content="Review cannot be empty",t},onSubmit:function(e,r){var o=r.resetForm,c={bookId:t,content:e.content};n(c).then((function(){o()}))},children:function(e){var t=e.isSubmitting;return Object(r.jsxs)(j.c,{className:"form-group form-inline",children:[Object(r.jsxs)("label",{className:"control-label",children:["Review:",Object(r.jsx)(j.b,{type:"text",className:"form-control",name:"content",as:"textarea"})]}),Object(r.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:t,children:"Add Review"}),Object(r.jsx)(j.a,{name:"content",className:"alert alert-danger",component:"div"})]})}})},v="http://localhost:5555/api/bookreactions/",f={accept:"application/json","content-type":"application/json"},O=function(e){return fetch(v+"Books",{method:"post",mode:"cors",headers:f,body:JSON.stringify(e)}).then((function(e){return e.json()}))},m="LIST_REVIEWS",p="ADD_REVIEW",x="LIST_BOOKS",g="ADD_BOOK",k={addReview:function(e){return function(t){return function(e){return fetch(v+"Reviews",{method:"post",mode:"cors",headers:f,body:JSON.stringify(e)}).then((function(e){return e.json()}))}(e).then((function(e){t({type:p,response:e})}))}}},w=Object(u.b)((function(e,t){return{bookId:parseInt(t.bookId)}}),k)(h);var y=function(e){var t=e.receiveReviews,n=e.reviews,c=e.match.params,a=c.title,s=c.bookId;return Object(o.useEffect)((function(){t(s)}),[t,s]),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("h2",{children:"Reviews:"}),Object(r.jsxs)("div",{className:"table-responsive",children:[Object(r.jsx)(w,{bookId:s}),Object(r.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(r.jsx)("thead",{children:Object(r.jsx)("tr",{children:Object(r.jsxs)("th",{children:["Reviews of ",a]})})}),Object(r.jsx)("tbody",{children:n.map((function(e,t){return Object(r.jsx)(b,{review:e.content},t)}))})]})]})]})},N={receiveReviews:function(e){return function(t){return function(e){return fetch(v+"Reviews/"+e).then((function(e){return e.json()}))}(e).then((function(e){t({type:m,response:e})}))}}},I=Object(u.b)((function(e){return{reviews:e.reviews}}),N)(y),R=n(25),B=n(26),E=n(30),D=n(28),S=function(e){Object(E.a)(n,e);var t=Object(D.a)(n);function n(){return Object(R.a)(this,n),t.apply(this,arguments)}return Object(B.a)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.bookId!==e.bookId}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.bookId,o=e.author,c=e.cover;return Object(r.jsxs)("tr",{children:[Object(r.jsxs)("td",{children:[Object(r.jsx)(i.b,{to:"/reviews/".concat(n,"/").concat(t),children:t})," "]}),Object(r.jsx)("td",{children:o}),Object(r.jsx)("td",{children:Object(r.jsx)("img",{src:c,alt:t})})]})}}]),n}(c.a.Component);S.defaultProps={title:"unknown",author:"unknown",cover:"/NoImage.png"};var L=S,A=n(19),C=function(e){var t=e.dropped,n=e.children;return Object(r.jsx)("div",{onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),t(e)},children:n})};var F=function(e){var t=function(){var e=Object(o.useState)(!1),t=Object(A.a)(e,2),n=t[0],r=t[1],c=Object(o.useRef)(null),a=function(){r(!0)},s=function(){r(!1)};return Object(o.useEffect)((function(){var e=c.current;if(e)return e.addEventListener("dragover",a),e.addEventListener("dragleave",s),e.addEventListener("drop",s),function(){e.removeEventListener("dragover",a),e.removeEventListener("dragleave",s),e.removeEventListener("drop",s)}}),[c]),[c,n]}(),n=Object(A.a)(t,2),c=n[0],a=n[1],s=Object(o.useState)(void 0),i=Object(A.a)(s,2),l=i[0],u=i[1],d=function(e){var t,n,r=160,o=e.target.files||e.dataTransfer.files;if(o&&o.length>0){var c=o[0],a=new FileReader;a.onload=function(e){var o=new Image;o.onload=function(){if(t=this.height,n=this.width,this.height>r&&(n=(t=r)*this.width/this.height),n>r){var e=n;t=(n=r)*t/e}var a=document.createElement("canvas"),s=a.getContext("2d");a.width=n,a.height=t,s.drawImage(o,0,0,n,t),u(a.toDataURL(c.type))},o.src=e.target.result},a.readAsDataURL(c)}};return Object(r.jsx)(j.d,{initialValues:{title:"",author:""},validate:function(e){var t={};return e.title?e.title.length<3&&(t.title="Title must be at least 3 characters"):t.title="Title Required",e.author?e.author.length<3&&(t.author="Author must be at least 3 characters"):t.author="Author Required",t},onSubmit:function(t,n){var r=n.resetForm,o={title:t.title,author:t.author,cover:l,bookId:-1};e.addBook(o).then((function(){r(),u(void 0)}))},children:function(e){var t=e.isSubmitting;return Object(r.jsxs)(j.c,{className:"form-group form-inline",children:[Object(r.jsxs)("label",{className:"control-label",children:["Title:",Object(r.jsx)(j.b,{type:"text",className:"form-control",name:"title"})]}),Object(r.jsxs)("label",{className:"control-label",children:["Author:",Object(r.jsx)(j.b,{type:"text",className:"form-control",name:"author"})]}),Object(r.jsx)(C,{dropped:d,children:Object(r.jsx)("img",{src:l||"./drop.png",alt:"",ref:c,style:a?{opacity:"25%"}:{opacity:"100%"}})}),Object(r.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:t,children:"Add Book"}),Object(r.jsx)(j.a,{name:"title",className:"alert alert-danger",component:"div"}),Object(r.jsx)(j.a,{className:"alert alert-danger",name:"author",component:"div"})]})}})},T={addBook:function(e){return function(t){return O(e).then((function(e){t({type:g,response:e})}))}}},J=Object(u.b)(null,T)(F),V=function(e){Object(E.a)(n,e);var t=Object(D.a)(n);function n(){var e;return Object(R.a)(this,n),(e=t.call(this)).addBook=function(t,n){O({title:t,author:n,cover:""}).then((function(){e.getBooks()}))},e.state={books:[]},e}return Object(B.a)(n,[{key:"componentDidMount",value:function(){this.getBooks()}},{key:"getBooks",value:function(){this.props.receiveBooks()}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:"table-responsive",children:[Object(r.jsx)(J,{}),Object(r.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Book"}),Object(r.jsx)("th",{children:"Author"}),Object(r.jsx)("th",{children:"Cover"})]})}),Object(r.jsx)("tbody",{children:this.props.books.map((function(e,t){return Object(r.jsx)(L,{author:e.author,title:e.title,cover:e.cover||void 0,bookId:e.bookId},t)}))})]})]})}}]),n}(c.a.Component),_={receiveBooks:function(){return function(e){return fetch(v+"Books").then((function(e){return e.json()})).then((function(t){e({type:x,response:t})}))}}},P=Object(u.b)((function(e){return{books:e.books}}),_)(V),U=n(3),W=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("h1",{children:"Book Reactions"})}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("h2",{children:"Where you react to books"})})]})};n(50);var q=function(e){var t=e.store;return Object(r.jsx)(u.a,{store:t,children:Object(r.jsx)(i.a,{children:Object(r.jsxs)("div",{className:"container-fluid",children:[Object(r.jsx)(l,{}),Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(U.a,{exact:!0,path:"/",component:P}),Object(r.jsx)(U.a,{path:"/about",component:W}),Object(r.jsx)(U.a,{path:"/reviews/:bookId/:title",component:I})]})]})})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),c(e),a(e)}))},M=n(39),H=n(16),z=n(29),G=[{content:"",bookId:-1}],Q=[{title:"",author:"",conver:"",bookId:-1}],X=Object(H.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.response;case g:return[t.response].concat(Object(z.a)(e));default:return e}},reviews:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return t.response;case p:return[t.response].concat(Object(z.a)(e));default:return e}}}),Y=function(){var e=[M.a];return Object(H.d)(X,H.a.apply(void 0,e))}();s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(q,{store:Y})}),document.getElementById("root")),K()}},[[51,1,2]]]);
//# sourceMappingURL=main.a8a6d0d2.chunk.js.map