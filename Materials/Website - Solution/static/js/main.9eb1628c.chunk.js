(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){e.exports=n(123)},114:function(e,t,n){},120:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(78),c=n.n(o),l=(n(114),n(12)),i=n(125),u=n(126),s=n(124),m=function(){return r.a.createElement("div",{className:"row navbar navbar-default"},r.a.createElement(s.a,{className:"navbar-brand",to:"/"},"Book Reactions"),r.a.createElement("ul",{className:"nav navbar-nav"},r.a.createElement("li",null,r.a.createElement(s.a,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(s.a,{to:"/about"},"About"))))},d=n(32),v=n(33),h=n(43),p=n(34),f=n(45),b=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(v.a)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.bookId!==e.bookId}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.bookId,a=e.author,o=e.cover;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(s.a,{to:"/reviews/".concat(n,"/").concat(t)},t)),r.a.createElement("td",null,a),r.a.createElement("td",null,r.a.createElement("img",{src:o,alt:t})))}}]),t}(r.a.Component);b.defaultProps={title:"unknown",author:"unknown",cover:"/NoImage.png"};var E=b,w=n(67),g=n(63),k=function(e){e.input;var t=e.label,n=(e.type,e.controlId),a=e.children,o=e.meta,c=o.touched,l=o.error,i=o.invalid;return r.a.createElement("div",{className:"form-group ".concat(c&&i?"has-error":"")},r.a.createElement("div",{className:"form-inline"},r.a.createElement("label",{htmlFor:n,className:"control-label"},t,": \xa0"),a),r.a.createElement("div",{className:"help-block"},c&&l&&r.a.createElement("span",null,l)))},O=function(e){var t=e.input,n=e.label,a=e.type,o=e.controlId,c=e.meta;return r.a.createElement(k,{label:n,meta:c},r.a.createElement("input",Object.assign({},t,{id:o,type:a,className:"form-control",placeholder:n})))},y=function(e){e.stopPropagation(),e.preventDefault()},j=function(e){var t=e.dropped,n=e.target,a=e.prop,o=e.children;return r.a.createElement("div",{className:"dropTarget",onDragOver:function(e){y(e)},onDragEnter:function(e){y(e)},onDrop:function(e){!function(e,t,n,a){y(e),t(e,n,a)}(e,t,n,a)}},o)},N=function(e,t,n){var a,r,o=e.target.files||e.dataTransfer.files;if(o&&o.length>0){var c=o[0],l=new FileReader;l.onload=function(e){var o=new Image;o.onload=function(){if(a=this.height,r=this.width,this.height>160&&(r=(a=160)*this.width/this.height),r>160){var e=r;a=(r=160)*a/e}var l=document.createElement("canvas"),i=l.getContext("2d");l.width=r,l.height=a,i.drawImage(o,0,0,r,a),t.change(n,l.toDataURL(c.type))},o.src=e.target.result},l.readAsDataURL(c)}},I=function(e,t,n){return!(!e||""===e.trim())||(t[n]="Cannot be empty",!1)},R=function(e,t,n,a,r){(e.length>r||e.length<a)&&(t[n]="must be between ".concat(a," and ").concat(r," characters"))},S=Object(g.a)({form:"book",validate:function(e){var t={};return I(e.title,t,"title")&&R(e.title,t,"title",3,256),I(e.author,t,"author")&&R(e.author,t,"author",4,100),t}})(function(e){var t=e.handleSubmit,n=e.cover;return r.a.createElement("form",{className:"form-group form-inline",onSubmit:t},r.a.createElement("div",{className:"row vertical-align"},r.a.createElement("div",{className:"col-xs-3"},r.a.createElement(w.a,{component:O,name:"title",type:"text",controlId:"title",label:"Title*"})),r.a.createElement("div",{className:"col-xs-3"},r.a.createElement(w.a,{component:O,name:"author",type:"text",controlId:"author",label:"Author*"})),r.a.createElement("div",{className:"col-xs-3"},r.a.createElement(j,{dropped:N,target:e,prop:"cover"},r.a.createElement("img",{src:n,alt:""}))),r.a.createElement("button",{type:"submit",className:"btn btn-default btn-primary"},"Submit")))}),D=n(52),B=n.n(D),x="http://localhost:5555/api/bookreactions/",W={accept:"application/json","content-type":"application/json"},A=n(27),C=n(72),L={author:"",cover:"",title:"",bookId:-1},_={onSubmit:function(e){return function(t){(function(e){return B()(x+"Books",{method:"post",mode:"cors",headers:W,body:JSON.stringify(e)}).then(function(e){return e.json()})})(e).then(function(e){t({type:"ADD_BOOK",book:e}),t(Object(A.a)("book"))})}}},T=Object(l.b)(function(e,t){var n=Object(C.a)("book");return{initialValues:L,cover:n(e,"cover")}},_)(S),V=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(v.a)(t,[{key:"componentWillMount",value:function(){this.props.receiveBooks()}},{key:"render",value:function(){var e=this.props.books;return r.a.createElement("div",{className:"table-responsive"},r.a.createElement(T,null),r.a.createElement("table",{className:"table table-bordered table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Book"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Cover"))),r.a.createElement("tbody",null,e.map(function(e,t){return r.a.createElement(E,{author:e.author,bookId:e.bookId,title:e.title,cover:e.cover||void 0,key:t})}))))}}]),t}(r.a.Component),J={receiveBooks:function(){return function(e){return B()(x+"Books").then(function(e){return e.json()}).then(function(t){e({type:"LIST_BOOKS",response:t})})}}},K=Object(l.b)(function(e){return{books:e.books}},J)(V),U=function(){return r.a.createElement("div",{className:"row"},r.a.createElement("h1",null,"Book Reactions"),r.a.createElement("h2",null,"Where you react to books"))},F=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.review))},M=function(e){var t=e.input,n=e.label,a=e.controlId,o=e.meta;return r.a.createElement(k,{label:n,meta:o,controlId:a},r.a.createElement("textarea",Object.assign({},t,{rows:"3",cols:"90",id:a,className:"form-control",placeholder:n})))},P=Object(g.a)({form:"review",validate:function(e){var t={};return e.content&&""!==e.content.trim()?(e.content.length>256||e.content.length<3)&&(t.content="Review must be between 3 and 256 characters"):t.content="Enter a review",t}})(function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{className:"row vertical-align"},r.a.createElement("div",{className:"col-xs-8"},r.a.createElement(w.a,{name:"content",controlId:"content",type:"text*",component:M,label:"Review*"})),r.a.createElement("button",{type:"submit",className:"btn btn-default btn-primary"},"Submit")))}),H={content:""};var $={onSubmit:function(e){return function(t){(function(e){return B()(x+"Reviews",{method:"post",mode:"cors",headers:W,body:JSON.stringify(e)}).then(function(e){return e.json()})})(e).then(function(e){t({type:"ADD_REVIEW",review:e}),t(Object(A.a)("review"))})}}},q=Object(l.b)(function(e,t){return{initialValues:(n=t.id,H.bookId=n,H)};var n},$)(P),z=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(v.a)(t,[{key:"componentWillMount",value:function(){this.props.receiveReviews(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props,t=e.reviews,n=e.match.params.title;return r.a.createElement("div",{className:"row"},r.a.createElement("h2",null,"Reviews of ",n,":"),r.a.createElement(q,{id:this.props.match.params.id}),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Review"))),r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement(F,{review:e.content,key:t})})))))}}]),t}(r.a.Component),G={receiveReviews:function(e){return function(t){return function(e){return B()(x+"Reviews/"+e).then(function(e){return e.json()})}(e).then(function(e){t({type:"LIST_REVIEWS",response:e})})}}},Q=Object(l.b)(function(e){return{reviews:e.reviews}},G)(z),X=(n(120),function(e){var t=e.store;return r.a.createElement(l.a,{store:t},r.a.createElement(i.a,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement(m,null),r.a.createElement("div",{className:"container"},r.a.createElement(u.a,{exact:!0,path:"/",component:K}),r.a.createElement(u.a,{path:"/about",component:U}),r.a.createElement(u.a,{path:"/reviews/:id/:title",component:Q})))))}),Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ee=n(7),te=n(84),ne=n(68),ae=[{content:""}],re=[{author:"",title:"",bookId:-1,cover:""}],oe=n(70),ce=Object(ee.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_BOOK":return[t.book].concat(Object(ne.a)(e));case"LIST_BOOKS":return t.response;default:return e}},reviews:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_REVIEW":return[t.review].concat(Object(ne.a)(e));case"LIST_REVIEWS":return t.response;default:return e}},form:oe.a}),le=function(){var e=[te.a];return Object(ee.d)(ce,ee.a.apply(void 0,e))}();c.a.render(r.a.createElement(X,{store:le}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Y?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Z(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):Z(e)})}}()}},[[109,2,1]]]);
//# sourceMappingURL=main.9eb1628c.chunk.js.map